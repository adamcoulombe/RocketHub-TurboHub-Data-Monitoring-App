(this["webpackJsonpget-data-usage"]=this["webpackJsonpget-data-usage"]||[]).push([[0],{14:function(e,a,t){e.exports=t(32)},19:function(e,a,t){},32:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),i=t(7),r=t.n(i),o=t(8),l=t(9),c=t(13),d=t(12),m=(t(19),t(2)),u=t.n(m),h=t(1),g=t.n(h),p=t(3),f=t.n(p),v=t(10),y=t.n(v),b=t(11),E=t.n(b),k=function(e){Object(c.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={entries:[],range:"today",currentUsage:"",todayUsage:"",options:{chart:{id:"data-usage"},xaxis:{categories:[]}},series:[{name:"usage",data:[]}],dataLabels:{enabled:!1},todayGaugeOptions:{},todayGaugeSeries:[]},n}return Object(l.a)(t,[{key:"componentWillMount",value:function(){this.getEntries()}},{key:"componentDidMount",value:function(){E.a.init({mainElement:"body",onRefresh:function(){window.location.reload()}})}},{key:"getEntries",value:function(){var e=this;fetch("http://"+window.location.hostname+":3901/api/all?timestamp="+g()().valueOf()).then((function(e){return e.text()})).then((function(a){var t=JSON.parse(a);e.setState({entries:t},e.updateChartData.bind(e))}))}},{key:"updateChartData",value:function(){var e,a;g()().date(9).endOf("day").isBefore(g()())?(e=g()().date(10).startOf("day"),a=g()().date(10).add(1,"months").endOf("day")):(e=g()().date(10).subtract(1,"months").startOf("day"),a=g()().date(10).endOf("day"));var t=a.diff(g()(),"days"),n=g()().startOf("day"),s=u.a.partition(this.state.entries,(function(e){return g()(e.time).isBefore(n)})),i=s[0],r=s[1],o=u.a.partition(this.state.entries,(function(a){return g()(a.time).isBefore(e)})),l=o[0],c=o[1];"last-hour"==this.state.range?c=u.a.filter(this.state.entries,(function(e){return g()(e.time).isSameOrAfter(g()().subtract(1,"hour"))})):"all"==this.state.range?c=this.state.entries:"today"==this.state.range&&(c=r);var d=parseFloat(u.a.last(i).usage),m=parseFloat(u.a.last(l).usage),h=(parseFloat(u.a.last(this.state.entries).usage)-m).toFixed(2),p=((200-h)/t).toFixed(2),f=(parseFloat(u.a.last(this.state.entries).usage)-d).toFixed(2),v=u.a.map(c,"time"),b=u.a.map(c,"usage").map((function(e){return(parseFloat(e)-m).toFixed(2)})),E=y()(["#33e9ab","#67b244","#E0B336","#fd9a2d","#fd5f76"]),k=v.map((function(e){return g()(e).format("dd M, h:mmA")}));this.setState({currentUsage:h,todayUsage:f,remainingDailyDataThisPeriod:p,options:{chart:{id:"data-usage"},xaxis:{categories:k},dataLabels:{enabled:!1}},series:[{name:"usage",data:b}],todayGaugeSeries:[f/p*100],todayGaugeOptions:{chart:{type:"radialBar",offsetY:-20,sparkline:{enabled:!0}},plotOptions:{radialBar:{startAngle:-90,endAngle:90,track:{background:"#e7e7e7",strokeWidth:"97%",margin:5},dataLabels:{name:{show:!1},value:{show:!1}}}},grid:{padding:{top:-10}},fill:{colors:[E(f/p)]}}})}},{key:"setRange",value:function(e){this.setState({range:e},this.updateChartData.bind(this))}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"app-inner"},s.a.createElement("header",{className:"header"},s.a.createElement("div",{className:"kpi"},s.a.createElement("div",{className:"kpi-data"},s.a.createElement("div",{className:"label"},"Month's Usage"),s.a.createElement("div",{className:"number"},this.state.currentUsage,s.a.createElement("span",{className:"unit"}," / 200GB")))),s.a.createElement("div",{className:"kpi"},s.a.createElement("div",{className:"meter"},s.a.createElement(f.a,{options:this.state.todayGaugeOptions,series:this.state.todayGaugeSeries,type:"radialBar",height:"280"})),s.a.createElement("div",{className:"kpi-data"},s.a.createElement("div",{className:"label"},"Today's Usage"),s.a.createElement("div",{className:"number"},this.state.todayUsage,s.a.createElement("span",{className:"unit"}," / ",this.state.remainingDailyDataThisPeriod,"GB"))))),s.a.createElement("div",{className:["chart-panel","range-".concat(this.state.range)].join(" ")},s.a.createElement("nav",{id:"nav"},s.a.createElement("div",{className:"nav-inner"},s.a.createElement("a",{className:"nav-item nav-item-today",onClick:this.setRange.bind(this,"today")},"Today"),s.a.createElement("a",{className:"nav-item nav-item-current-period",onClick:this.setRange.bind(this,"current-period")},"This Month"),s.a.createElement("a",{className:"nav-item nav-item-last-hour",onClick:this.setRange.bind(this,"last-hour")},"Last Hour"),s.a.createElement("a",{className:"nav-item nav-item-all",onClick:this.setRange.bind(this,"all")},"All"))),s.a.createElement(f.a,{options:this.state.options,toolbar:this.state.toolbar,series:this.state.series,type:"area",height:"300"}))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(k,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[14,1,2]]]);
//# sourceMappingURL=main.bc244be6.chunk.js.map